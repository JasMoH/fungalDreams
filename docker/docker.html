<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Docker stuff - Fungal Dreams</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../documentation_tools.html"><strong aria-hidden="true">2.</strong> Documentation tools</a></li><li class="chapter-item expanded "><a href="../docker/docker.html" class="active"><strong aria-hidden="true">3.</strong> Docker stuff</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../docker/interactive.html"><strong aria-hidden="true">3.1.</strong> Interactive Docker</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Fungal Dreams</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="some-notes-on-what-docker-is-for-the-uninitiated"><a class="header" href="#some-notes-on-what-docker-is-for-the-uninitiated">some notes on what docker is for the uninitiated</a></h1>
<p>New users to docker often find it hard to know where to start. Many tutorials dive right in to deploying 
containers without really saying what a container <em>is</em>. This attempts to collect some observations that
I've found useful for explaining docker to newbies.</p>
<h2 id="docker-is-confusing"><a class="header" href="#docker-is-confusing">Docker is confusing</a></h2>
<p>The reason why docker is confusing to learn about is because it isn't really <em>one</em> thing, it's
a collection of many tools that solve many problems. Because there's no single problem it solves, there's also
no single way it is used, hence the differences between docker run, docker-compose, and more advanced frameworks like
kuberenetes.</p>
<p>Docker can be used for some wildly different problems:</p>
<ul>
<li>controlling development and compilation environments</li>
<li>coordinating server side services such as load balances and databases</li>
</ul>
<p>These problems have very different needs, and use very different sets of features in different ways.</p>
<h2 id="docker-is-chroot--sorta"><a class="header" href="#docker-is-chroot--sorta">Docker is chroot ... sorta</a></h2>
<p>I find it easiest to start to think through what docker is by building up from something simpler.
The simplest thing that you could call &quot;a container&quot; is <a href="https://en.wikipedia.org/wiki/Chroot">chroot</a> with 
a bunch of extra convenience tools. chroot allows you to have a separate file system in a box.
Notably, anything that runs in the chroot container still runs natively, and has access to anyting that isn't
hidden by the file system, such as network, physical hardware, kernel modules, etc. You can look at something like <a href="https://github.com/RPi-Distro/pi-gen">pi-gen</a> as an example of something
that uses chroot to build up an entire operating system. </p>
<p>The scripting in pigen is rather single purpose, so docker provides a bunch of convenience features
to manage building and running containers. this <a href="https://devops.stackexchange.com/questions/2826/difference-between-chroot-and-docker">stack exchange</a>
article lists the nice bits:</p>
<ul>
<li>A standardized script file format including semantics relating to the task a hand</li>
<li>Images (including anonymous in-between images), caching, naming, downloading etc. including powerful management (docker image prune ...)</li>
<li>Containers (including their own temporary file systems, naming, being able to docker exec into them etc.)</li>
<li>Process management (docker container ...)</li>
<li>Networking with just a simple option, including intra-docker-container-networking etc.</li>
<li>Volumes (including special managed volumes)</li>
<li>docker-compose or swarm as low-profile upgrades to much more.</li>
<li>The large zoo of other solutions based on dockerized containers (OpenShift etc.).</li>
</ul>
<h2 id="docker-is-more-than-chroot"><a class="header" href="#docker-is-more-than-chroot">Docker is more than chroot</a></h2>
<p>chroot only provides isolation on the file system, docker also provides isolation on:</p>
<ul>
<li>mnt namespace provides a root filesystem</li>
<li>pid namespace so the process only sees itself and its children</li>
<li>network namespace which allows the container to have its dedicated network stack</li>
<li>user namespace (quite new) which allows a non root user on a host to be mapped with the root user within the container</li>
<li>uts provides dedicated hostname</li>
<li>ipc provides dedicated shared memory</li>
</ul>
<h2 id="there-are-many-ways-to-use-containers"><a class="header" href="#there-are-many-ways-to-use-containers">There are many ways to use containers</a></h2>
<p>There are a ton of tools for configuring and running containers: <code>docker run</code>, <code>docker-compose</code>, k8s, and others.
They all provide different ways to select your containers, and configure them to run in a bunch of different ways.
You can run containers interactively for debugging or developing other software, or cluster them together and spool them up based
on dynamic loading in a larger system </p>
<p>These different user interfaces to the same underlying container system evolved somewhat independently, and feel
like they are almost unrelated tools. As best as I can tell, that's because they are. </p>
<h2 id="most-of-these-differences-are-related-to-side-effects"><a class="header" href="#most-of-these-differences-are-related-to-side-effects">Most of these differences are related to side-effects</a></h2>
<p>If the containers perfectly isolated their contents from the outside world these programs would run
on the exact same files and environmental variables as inputs, isolated from the outside network every time.
Any changes they made to those files or variables are discarded, and nothing they try to send gets to the network.
This is useless! The whole point of computing is to do something with the real world other than burn CPU.
When you run a container you usually expose network ports, mount files, set environmental variables, and harvest the output.
In other words, controlling the side effects available for your container to change. These different tools have 
wildly different styles for specifying and managing all these options.</p>
<p>This also means a single container can have different uses and different behavior depending on how it is invoked.
This isn't any different from any other program that has run-time decision making based on reading some environmental input.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../documentation_tools.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../docker/interactive.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../documentation_tools.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../docker/interactive.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../mermaid.min.js"></script>
        <script type="text/javascript" src="../mermaid-init.js"></script>
        <script type="text/javascript" src="../wavedrom.min.js"></script>
        <script type="text/javascript" src="../wavedrome-default.js"></script>


    </body>
</html>
